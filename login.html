<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
    <title>QriousCodes | Login</title>
    <!-- cdn Stylesheet-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous" />
    <!-- Stylesheet -->
    <link rel="stylesheet" href="./css/global/form-style.css" type="text/css" />
    <link rel="stylesheet" href="./css/styles.css" type="text/css" />
    <link rel="stylesheet" href="./css/login/login.css" type="text/css" />
  </head>
  <body>
    <main class="loginWrapper">
      <div class="loginInfoGrid">
        <div>
          <div class="brandLogo">
            <img src="./images/qriouscodes-logo.png" alt="qriouscodes-logo" />
          </div>
          <h1>Welcome, We are glad to see you again!</h1>
          <div class="brandQr">
            <img src="./images/qrcode-qriouscodes.png" alt="QriousCodes QR" />
          </div>
        </div>
      </div>
      <div class="midGridImg">
        <img src="./images/login/tracking.png" alt="tracking" />
      </div>
      <div class="loginFormCol">
        <div class="loginFormGrid">
          <!-- -------------------  -->
          <div class="logoIcon">
            <img src="./images/qriouscodes-lcon.png" alt="QriousCodes lcon" />
          </div>
          <!-- -----login form----- -->
          <div id="loginGridID">
            <h2>
              <strong>Sign In</strong><br />
              QriousCodes
            </h2>
            <form class="form" onsubmit="onSubmitLogin();return false">
              <!-- <div>
                <input
                  type="text"
                  placeholder="User ID"
                  class="form-control  inputSmall"
                  required />
              </div> -->
              <div>
                <input
                  type="text"
                  placeholder="User ID"
                  class="form-control"
                  required />
              </div>
              <div>
                <input
                  type="password"
                  placeholder="Password"
                  class="form-control"
                  maxlength="16"
                  autocomplete="new-password"
                  required />
              </div>
              <!-- <div>Remember me</div> -->
              <div>
                <span
                  class="cursorPointer linkPrimary"
                  onclick="onclickForgotPassword()">
                  Forgot Password ?
                </span>
              </div>
              <div class="d-grid">
                <input type="submit" class="btn btn-primary" value="Login" />
              </div>
            </form>
          </div>
          <!-- -----forgot password form----- -->
          <div id="forgotPasswordGridID" style="display: none">
            <h2 class="pb-1">
              <strong>Forgot Password</strong>
            </h2>
            <p>
              To reset your password, enter the email address you use to sign in
              to QRIOUSCODES
            </p>
            <form class="form" onsubmit="onSubmitForgotPassword();return false">
              <div>
                <input
                  type="email"
                  placeholder="Email"
                  class="form-control"
                  required />
              </div>
              <div class="d-grid">
                <input type="submit" value="Submit" class="btn btn-primary" />
              </div>
              <div>
                <span
                  class="cursorPointer linkPrimary"
                  onclick="funBackToLogin()">
                  <i class="fa-solid fa-arrow-left"></i> back to login
                </span>
              </div>
            </form>
          </div>
          <!-- -----otp verify form----- -->
          <div id="otpVerifyGridID" style="display: none">
            <h2 class="pb-1">
              <strong>Enter OTP</strong>
            </h2>
            <p>We have sent you OTP to your email address for verification</p>
            <form class="form" onsubmit="onSubmitOTPVerify();return false">
              <div class="otp-container mt-2">
                <input
                  type="text"
                  class="otp-input"
                  pattern="\d"
                  maxlength="1"
                  required />
                <input
                  type="text"
                  class="otp-input"
                  pattern="\d"
                  maxlength="1"
                  disabled
                  required />
                <input
                  type="text"
                  class="otp-input"
                  pattern="\d"
                  maxlength="1"
                  disabled
                  required />
                <input
                  type="text"
                  class="otp-input"
                  pattern="\d"
                  maxlength="1"
                  disabled
                  required />
                <input
                  type="text"
                  class="otp-input"
                  pattern="\d"
                  maxlength="1"
                  disabled
                  required />
                <input
                  type="text"
                  class="otp-input"
                  pattern="\d"
                  maxlength="1"
                  disabled />
              </div>
              <div class="d-grid">
                <input type="submit" class="btn btn-primary" value="Submit" />
              </div>
              <div>
                <span
                  class="cursorPointer linkPrimary"
                  onclick="funBackToLogin()">
                  <i class="fa-solid fa-arrow-left"></i> back to login
                </span>
              </div>
            </form>
          </div>
          <!-- -----change password form----- -->
          <div id="changePasswordGridID" style="display: none">
            <h2 class="pb-1">
              <strong>Change Password</strong>
            </h2>
            <form class="form" onsubmit="onSubmitChangePassword();return false">
              <div>
                <input
                  type="password"
                  placeholder="New Password"
                  class="form-control"
                  required />
              </div>
              <div>
                <input
                  type="password"
                  placeholder="Confirm Password"
                  class="form-control"
                  required />
              </div>
              <div class="d-grid">
                <input
                  type="submit"
                  class="btn btn-primary"
                  value="Change Password" />
              </div>
              <div>
                <span
                  class="cursorPointer linkPrimary"
                  onclick="funBackToLogin()">
                  <i class="fa-solid fa-arrow-left"></i> back to login
                </span>
              </div>
            </form>
          </div>
        </div>
      </div>
    </main>
    <!-- ===========js function=========== -->
    <script>
      let getIdLoginGrid = document.getElementById("loginGridID");
      let getIdForgotPassword = document.getElementById("forgotPasswordGridID");
      let getIdOTPVerify = document.getElementById("otpVerifyGridID");
      let getIdChangePassword = document.getElementById("changePasswordGridID");
      function onSubmitLogin() {
        location.replace("./username/layout.html");
      }
      function onclickForgotPassword() {
        getIdForgotPassword.style.display = "block";
        getIdLoginGrid.style.display = "none";
      }
      function onSubmitForgotPassword() {
        getIdOTPVerify.style.display = "block";
        getIdForgotPassword.style.display = "none";
      }
      function onSubmitOTPVerify() {
        getIdOTPVerify.style.display = "none";
        getIdChangePassword.style.display = "block";
      }
      function onSubmitChangePassword() {
        getIdChangePassword.style.display = "none";
        getIdLoginGrid.style.display = "block";
      }
      function funBackToLogin() {
        getIdLoginGrid.style.display = "block";
        getIdForgotPassword.style.display = "none";
        getIdOTPVerify.style.display = "none";
        getIdChangePassword.style.display = "none";
      }
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var otpInputs = document.querySelectorAll(".otp-input");
        function setupOtpInputListeners(inputs) {
          inputs.forEach(function (input, index) {
            input.addEventListener("paste", function (ev) {
              var clip = ev.clipboardData.getData("text").trim();
              if (!/^\d{6}$/.test(clip)) {
                ev.preventDefault();
                return;
              }

              var characters = clip.split("");
              inputs.forEach(function (otpInput, i) {
                otpInput.value = characters[i] || "";
              });

              enableNextBox(inputs[0], 0);
              inputs[5].removeAttribute("disabled");
              inputs[5].focus();
              updateOTPValue(inputs);
            });

            input.addEventListener("input", function () {
              var currentIndex = Array.from(inputs).indexOf(this);
              var inputValue = this.value.trim();

              if (!/^\d$/.test(inputValue)) {
                this.value = "";
                return;
              }

              if (inputValue && currentIndex < 5) {
                inputs[currentIndex + 1].removeAttribute("disabled");
                inputs[currentIndex + 1].focus();
              }

              if (currentIndex === 4 && inputValue) {
                inputs[5].removeAttribute("disabled");
                inputs[5].focus();
              }

              updateOTPValue(inputs);
            });

            input.addEventListener("keydown", function (ev) {
              var currentIndex = Array.from(inputs).indexOf(this);

              if (!this.value && ev.key === "Backspace" && currentIndex > 0) {
                inputs[currentIndex - 1].focus();
              }
            });
          });
        }

        function enableNextBox(input, currentIndex) {
          var inputValue = input.value;

          if (inputValue === "") {
            return;
          }

          var nextIndex = currentIndex + 1;
          var nextBox = otpInputs[nextIndex];

          if (nextBox) {
            nextBox.removeAttribute("disabled");
          }
        }

        function updateOTPValue(inputs) {
          var otpValue = "";

          inputs.forEach(function (input) {
            otpValue += input.value;
          });

          if (inputs === otpInputs) {
            document.getElementById("verificationCode").value = otpValue;
          }
        }

        setupOtpInputListeners(otpInputs);
        otpInputs[0].focus(); // Set focus on the first OTP input field
        otpInputs[5].addEventListener("input", function () {
          updateOTPValue(otpInputs);
        });
      });
    </script>
  </body>
</html>
